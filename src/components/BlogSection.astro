---
interface Props {
  posts: {
    slug: string;
    data: {
      title: string;
      excerpt: string;
      tags: string[];
      pubDate: Date;
      coverImage?: {
        src: string;
      };
    };
  }[];
}

const { posts } = Astro.props;
---

<!-- Latest from the Blog -->
<section class='reveal mt-20 max-w-screen-lg mx-auto px-8'>
  <div class='flex flex-col sm:flex-row items-start sm:items-end justify-between gap-4 mb-8'>
    <div>
      <h2 class='text-2xl md:text-3xl font-bold tracking-tight mb-1'>
        Latest from the blog
      </h2>
      <p class='text-[color:var(--white)]/80'>
        Insights, tutorials, and thoughts on AI and technology
      </p>
    </div>
    <a href='/blog'
      class='text-sm text-[color:var(--white)]/80 hover:text-[color:var(--accent)] flex items-center gap-1 font-medium'>
      Browse all articles
      <svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor'
        stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-arrow-right'>
        <path d='M5 12h14'></path>
        <path d='m12 5 7 7-7 7'></path>
      </svg>
    </a>
  </div>
  <ul class='grid grid-cols-1 md:grid-cols-2 2xl:grid-cols-3 gap-6 md:gap-8'>
    {
      posts.map((post) => (
        <li class='glass-card group transition-all duration-300 hover:-translate-y-1 hover:border-[color:var(--accent)]/60'>
          <a class='flex flex-col p-5 h-full' href={`/blog/${post.slug}/`}>
            {post.data.coverImage?.src ? (
              <div class='mb-4 overflow-hidden rounded-xl aspect-video'>
                <img class='w-full h-full object-cover transition-transform duration-500 ease-in-out group-hover:scale-105'
                  src={post.data.coverImage.src} alt={post.data.title} />
              </div>
            ) : (
              <div class='mb-4 overflow-hidden rounded-xl aspect-video bg-gradient-to-br from-[color:var(--accent)]/20 to-[color:var(--accent-publications)]/20 flex items-center justify-center'>
                <svg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='none'
                  stroke='currentColor' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'
                  class='lucide lucide-file-text text-[color:var(--white)]/30'>
                  <path d='M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z' />
                  <path d='M14 2v4a2 2 0 0 0 2 2h4' />
                  <path d='M10 9H8' />
                  <path d='M16 13H8' />
                  <path d='M16 17H8' />
                </svg>
              </div>
            )}
            <div class='flex flex-wrap gap-2 mb-3'>
              {post.data.tags.slice(0, 2).map((tag) => (
                <span class='glass-chip text-xs'>{tag}</span>
              ))}
            </div>
            <h3 class='text-xl md:text-2xl font-semibold tracking-tight mb-2'>
              {post.data.title}
            </h3>
            <p class='italic opacity-80 text-sm mb-3'>
              <time datetime={post.data.pubDate.toISOString()}>
                {post.data.pubDate.toLocaleDateString('en-us', {
                  year: 'numeric',
                  month: 'short',
                  day: 'numeric',
                })}
              </time>
            </p>
            <p class='line-clamp-3 flex-grow text-[color:var(--white)]/80'>
              {post.data.excerpt}
            </p>
            <div class='mt-4 flex items-center text-sm font-medium text-[color:var(--accent)]'>
              Read more
              <svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none'
                stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'
                class='lucide lucide-arrow-right ml-1'>
                <path d='M5 12h14' />
                <path d='m12 5 7 7-7 7' />
              </svg>
            </div>
          </a>
        </li>
      ))
    }
  </ul>
</section>