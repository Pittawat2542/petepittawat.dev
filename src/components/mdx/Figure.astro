---
interface Props {
  src: any; // string URL or imported asset
  alt?: string;
  caption?: string;
}
const { src, alt = '', caption } = Astro.props as Props;
const imgSrc = typeof src === 'string'
  ? src
  : (src && typeof src === 'object' && 'src' in src ? (src as any).src : String(src));
---

<figure class="mdx-figure">
  <img src={imgSrc} alt={alt} loading="lazy" decoding="async" />
  {caption ? <figcaption>{caption}</figcaption> : null}
  <slot />
  
</figure>

<style is:inline>
.mdx-figure { margin: 1.5rem 0; }
.mdx-figure img { width: 100%; height: auto; border-radius: 0.75rem; }
.mdx-figure figcaption { margin-top: 0.5rem; color: rgb(148 163 184); font-size: 0.9rem; text-align: center; }
</style>
