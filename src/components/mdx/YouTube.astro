---
interface Props { id?: string; url?: string; title?: string }
const { id, url, title = 'YouTube video' } = Astro.props as Props;
const videoId = id ?? (url ? new URL(url).searchParams.get('v') ?? '' : '');
const src = `https://www.youtube-nocookie.com/embed/${videoId}?rel=0`;
---

<div class="yt-embed">
  <iframe
    src={src}
    title={title}
    loading="lazy"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
    allowfullscreen
    referrerpolicy="strict-origin-when-cross-origin"
  />
</div>

<style is:inline>
.yt-embed { position: relative; width: 100%; aspect-ratio: 16 / 9; }
.yt-embed iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: 0; border-radius: 0.75rem; }
</style>

