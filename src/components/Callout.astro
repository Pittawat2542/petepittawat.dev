---
import { Info, Lightbulb, AlertTriangle, FileText } from 'lucide-astro';

interface Props {
  type?: 'info' | 'tip' | 'warn' | 'note';
  title?: string;
  icon?: boolean;
}

const { type = 'info', title, icon = true } = Astro.props as Props;

const headingId = title
  ? `callout-${title.toLowerCase().replace(/[^a-z0-9]+/g, '-')}`
  : undefined;

// Map type to icon component
const iconMap = {
  tip: Lightbulb,
  warn: AlertTriangle,
  note: FileText,
  info: Info
};

const IconComponent = iconMap[type] || Info;
---
<div class={`callout ${type}`} role="note" aria-labelledby={headingId}>
  {title ? (
    <div id={headingId} class="callout-title">
      {icon ? <IconComponent size={16} aria-hidden="true" /> : null}
      <span>{title}</span>
    </div>
  ) : null}
  <slot />
</div>
