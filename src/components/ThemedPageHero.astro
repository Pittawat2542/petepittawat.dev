---
const { title, subtitle, page } = Astro.props as { title: string; subtitle?: string; page: string };
---

<div class="relative overflow-hidden rounded-3xl p-6 md:p-10 mb-6 max-w-6xl mx-auto"
  style={`border-color: color-mix(in oklab, var(--accent-${page}) 20%, transparent);`}
>
  <!-- Enhanced abstract swirling background with more layers -->
  <div aria-hidden="true" class="pointer-events-none absolute inset-0 -z-10 overflow-hidden">
    <!-- Swirling gradient layers -->
    <div class="absolute inset-0 opacity-30"
         style={`background: radial-gradient(ellipse at center, color-mix(in oklab, var(--accent-${page}) 20%, transparent) 0%, transparent 70%);`}></div>
    
    <!-- Animated blobs -->
    <div class="blob-swirl-1 absolute -top-1/2 -left-1/2 w-[200%] h-[200%] opacity-20"
         style={`background: conic-gradient(from 0deg at 50% 50%, color-mix(in oklab, var(--accent-${page}) 60%, transparent), color-mix(in oklab, var(--white) 30%, transparent), color-mix(in oklab, var(--accent-${page}) 60%, transparent));`}></div>
    
    <div class="blob-swirl-2 absolute -top-1/2 -left-1/2 w-[200%] h-[200%] opacity-15"
         style={`background: conic-gradient(from 120deg at 50% 50%, color-mix(in oklab, var(--white) 40%, transparent), color-mix(in oklab, var(--accent-${page}) 30%, transparent), color-mix(in oklab, var(--white) 40%, transparent));`}></div>
    
    <div class="blob-swirl-3 absolute -top-1/2 -left-1/2 w-[200%] h-[200%] opacity-25"
         style={`background: conic-gradient(from 240deg at 50% 50%, color-mix(in oklab, var(--accent-${page}) 40%, transparent), color-mix(in oklab, var(--white) 20%, transparent), color-mix(in oklab, var(--accent-${page}) 40%, transparent));`}></div>
    
    <!-- Center glow -->
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 rounded-full blur-3xl opacity-30"
         style={`background: radial-gradient(circle, color-mix(in oklab, var(--accent-${page}) 70%, transparent), transparent 70%);`}></div>
  </div>

  <div class="relative text-center py-4 md:py-6">
    <h1 class="text-3xl md:text-5xl lg:text-6xl font-extrabold tracking-tight"
        style={`background: linear-gradient(to right, var(--accent-${page}), var(--white), var(--accent-${page})); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;`}>
      {title}
    </h1>
    {subtitle ? (
      <p class="mt-4 text-base md:text-lg lg:text-xl text-[color:var(--white)]/90 max-w-2xl mx-auto font-medium leading-relaxed">
        {subtitle}
      </p>
    ) : null}
  </div>
</div>

<style>
  @keyframes swirl {
    0% { transform: rotate(0deg) scale(1); }
    100% { transform: rotate(360deg) scale(1); }
  }
  
  @keyframes swirl-reverse {
    0% { transform: rotate(0deg) scale(1); }
    100% { transform: rotate(-360deg) scale(1); }
  }
  
  @keyframes pulse-slow {
    0% { opacity: 0.8; }
    50% { opacity: 1; }
    100% { opacity: 0.8; }
  }
  
  .blob-swirl-1 { 
    animation: swirl 25s linear infinite; 
  }
  
  .blob-swirl-2 { 
    animation: swirl-reverse 30s linear infinite; 
  }
  
  .blob-swirl-3 { 
    animation: swirl 35s linear infinite; 
  }
  
  .animate-pulse-slow {
    animation: pulse-slow 4s ease-in-out infinite;
  }
  
  @media (prefers-reduced-motion: reduce) {
    .blob-swirl-1, .blob-swirl-2, .blob-swirl-3 {
      animation: none;
    }
    .animate-pulse-slow {
      animation: none;
    }
  }
</style>