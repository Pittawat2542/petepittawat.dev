---
import Container from './Container.astro';
import blogImg from '../assets/images/blog.png';
import pubsImg from '../assets/images/publications.png';
import talksImg from '../assets/images/talks.png';
import { Image } from 'astro:assets';
import { ArrowRight } from 'lucide-astro';

interface Props {
	stats: {
		posts: number;
		publications: number;
		talks: number;
	};
}

const { stats } = Astro.props;

const cards = [
	{
		href: '/blog',
		ariaLabel: 'Read the blog',
		title: 'Blog posts',
		count: stats.posts,
		linkText: 'Read the blog',
		accentColor: 'accent',
		image: blogImg,
		alt: 'Blog posts illustration',
	},
	{
		href: '/publications',
		ariaLabel: 'View publications',
		title: 'Publications',
		count: stats.publications,
		linkText: 'View publications',
		accentColor: 'accent',
		image: pubsImg,
		alt: 'Publications illustration',
	},
	{
		href: '/talks',
		ariaLabel: 'See talks',
		title: 'Talks',
		count: stats.talks,
		linkText: 'See talks',
		accentColor: 'accent',
		image: talksImg,
		alt: 'Talks illustration',
	},
];
---

<Container class='reveal mt-16 glass-section'>
	<div class='text-center mb-10'>
		<h2 class='text-2xl md:text-3xl font-bold tracking-tight mb-2'>
			My Work at a Glance
		</h2>
		<p class='text-[color:var(--white)]/80 max-w-2xl mx-auto'>
			Explore my contributions to research, writing, and knowledge sharing
		</p>
	</div>

	<ul class='grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8'>
		{
			cards.map((card) => (
				<li class='h-full'>
					<a
						href={card.href}
						aria-label={card.ariaLabel}
						class={`group block h-full rounded-3xl overflow-hidden rounded-2xl border border-border bg-card text-card-foreground shadow-sm transition-all duration-300 ease-in-out
                hover:ring-[color:var(--${card.accentColor})]/50 transition-all duration-300 motion-safe:hover:-translate-y-1 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--${card.accentColor})]/60`}
					>
						<div class='p-5 md:p-6'>
							<figure class='relative'>
								<Image
									src={card.image}
									alt={card.alt}
									class='max-h-full max-w-full object-contain'
									loading='lazy'
									decoding='async'
								/>
							</figure>

							<div class='mt-5 text-center'>
								<p
									class={`text-xs tracking-wider uppercase text-[color:var(--${card.accentColor})]`}
								>
									{card.title}
								</p>
								<p
									class={`text-4xl font-extrabold tracking-tight mt-1 bg-[color:var(--${card.accentColor})] bg-clip-text text-transparent`}
									style={{ WebkitTextFillColor: 'transparent' }}
								>
									{card.count}
								</p>
							</div>
						</div>
						<div class='px-5 pb-5 flex w-full justify-center items-center'>
                        <div
                            class={`inline-flex items-center gap-1.5 rounded-full px-3 py-1.5 text-sm font-medium cursor-pointer
                        text-[color:var(--${card.accentColor})]
                        bg-[color:var(--${card.accentColor})]/[.10]
                        ring-1 ring-[color:var(--${card.accentColor})]/40
                        transition-colors duration-200 group-hover:bg-[color:var(--${card.accentColor})]/[.16]`}
                            role='button'
                            aria-label={card.linkText}
                        >
                            <span>{card.linkText}</span>
                            <ArrowRight class='h-4 w-4' aria-hidden='true' />
                        </div>
						</div>
					</a>
				</li>
			))
		}
	</ul>
</Container>
