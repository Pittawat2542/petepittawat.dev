---
import Container from './Container.astro';
import blogImg from '../assets/images/blog.png';
import pubsImg from '../assets/images/publications.png';
import talksImg from '../assets/images/talks.png';
import { Image } from 'astro:assets';
import { ArrowRight, BookText, Mic, ScrollText } from 'lucide-astro';

interface Props {
	stats: {
		posts: number;
		publications: number;
		talks: number;
	};
}

const { stats } = Astro.props;

const cards = [
	{
		href: '/blog',
		ariaLabel: 'Read the blog',
		title: 'Blog posts',
		count: stats.posts,
		linkText: 'Read the blog',
		accentColor: 'accent',
		image: blogImg,
		alt: 'Blog posts illustration',
		Icon: BookText,
	},
	{
		href: '/publications',
		ariaLabel: 'View publications',
		title: 'Publications',
		count: stats.publications,
		linkText: 'View publications',
		accentColor: 'accent',
		image: pubsImg,
		alt: 'Publications illustration',
		Icon: ScrollText,
	},
	{
		href: '/talks',
		ariaLabel: 'See talks',
		title: 'Talks',
		count: stats.talks,
		linkText: 'See talks',
		accentColor: 'accent',
		image: talksImg,
		alt: 'Talks illustration',
		Icon: Mic,
	},
];
---

<Container class='reveal mt-16 glass-section'>
	<div class='text-center mb-10'>
		<h2 class='text-2xl md:text-3xl font-bold tracking-tight mb-2'>
			My Work at a Glance
		</h2>
		<p class='text-[color:var(--white)]/80 max-w-2xl mx-auto'>
			Explore my contributions to research, writing, and knowledge sharing
		</p>
	</div>

    <ul class='grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8'>
      {
        cards.map((card) => (
          <li class='h-full'>
            <a
              href={card.href}
              aria-label={card.ariaLabel}
              class={`group relative overflow-hidden block h-full rounded-2xl border border-border bg-card glass-card text-card-foreground shadow-sm transition-all duration-300 ease-in-out
                motion-safe:hover:-translate-y-1 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--${card.accentColor})]/40`}
            >
              <!-- Decorative oversized background image (partial, right-aligned) -->
              <Image
                src={card.image}
                alt=""
                aria-hidden="true"
                loading="lazy"
                decoding="async"
                class='pointer-events-none select-none absolute -right-10 top-1/2 -translate-y-1/2 h-[220%] opacity-15 blur-[0.5px]'
              />

              <div class='relative z-10 p-5 md:p-6 flex h-full flex-col gap-4'>
                <div class='flex items-center justify-between'>
                  <div class='inline-flex items-center justify-center h-12 w-12 rounded-xl ring-1 ring-[color:var(--white)]/10 bg-[color:var(--black-nav)]/60 backdrop-blur-sm'>
                    <card.Icon class='h-6 w-6 opacity-90' aria-hidden='true' />
                  </div>
                  <ArrowRight class='h-4 w-4 opacity-70 transition-transform duration-200 group-hover:translate-x-0.5' aria-hidden='true' />
                </div>

                <div class='mt-1'>
                  <p class='text-[color:var(--white)]/70 text-xs tracking-wider uppercase'>{card.title}</p>
                  <p class={`mt-1 text-4xl font-extrabold tracking-tight bg-[color:var(--${card.accentColor})] bg-clip-text text-transparent`} style={{ WebkitTextFillColor: 'transparent' }}>
                    {card.count}
                  </p>
                </div>

                <div class='mt-auto pt-2'>
                  <span
                    class={`inline-flex items-center gap-1.5 rounded-full px-3 py-1.5 text-sm font-medium
                    text-[color:var(--${card.accentColor})]
                    bg-[color:var(--${card.accentColor})]/[.10]
                    ring-1 ring-[color:var(--${card.accentColor})]/40
                    transition-colors duration-200 group-hover:bg-[color:var(--${card.accentColor})]/[.16]`}
                    aria-hidden='true'
                  >
                    <span>{card.linkText}</span>
                    <ArrowRight class='h-4 w-4' aria-hidden='true' />
                  </span>
                </div>
              </div>
            </a>
          </li>
        ))
      }
    </ul>
  </Container>
