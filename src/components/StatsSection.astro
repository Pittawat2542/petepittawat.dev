---
interface Props {
  stats: {
    posts: number;
    publications: number;
    talks: number;
  };
}

const { stats } = Astro.props;

const cards = [
  {
    href: '/blog',
    ariaLabel: 'Read the blog',
    title: 'Blog posts',
    count: stats.posts,
    linkText: 'Read the blog →',
    accentColor: 'accent',
    icon: `<svg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round' class='text-[color:var(--accent)]'><path d='M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20' /></svg>`
  },
  {
    href: '/publications',
    ariaLabel: 'View publications',
    title: 'Publications',
    count: stats.publications,
    linkText: 'View publications →',
    accentColor: 'accent-publications',
    icon: `<svg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round' class='text-[color:var(--accent-publications)]'><path d='M4 19.5A2.5 2.5 0 0 1 6.5 17H20v-6.5A2.5 2.5 0 0 1 22.5 8H22v6.5a2.5 2.5 0 0 1-2.5 2.5H6.5A2.5 2.5 0 0 1 4 14.5v5Z' /><path d='M8 7.5A2.5 2.5 0 0 1 10.5 5H22v12.5a2.5 2.5 0 0 1-2.5 2.5H10.5A2.5 2.5 0 0 1 8 17.5v-10Z' /></svg>`
  },
  {
    href: '/talks',
    ariaLabel: 'See talks',
    title: 'Talks',
    count: stats.talks,
    linkText: 'See talks →',
    accentColor: 'accent-talks',
    icon: `<svg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round' class='text-[color:var(--accent-talks)]'><path d='M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z' /><path d='M19 10v2a7 7 0 0 1-14 0v-2' /><line x1='12' x2='12' y1='19' y2='22' /></svg>`
  }
];
---

<section class='reveal mt-16 max-w-screen-lg mx-auto px-8'>
  <div class='text-center mb-10'>
    <h2 class='text-2xl md:text-3xl font-bold tracking-tight mb-2'>
      My Work at a Glance
    </h2>
    <p class='text-[color:var(--white)]/80 max-w-2xl mx-auto'>
      Explore my contributions to research, writing, and knowledge sharing
    </p>
  </div>

  <ul class='grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8'>
    {cards.map((card) => (
      <li class='h-full'>
        <a href={card.href} aria-label={card.ariaLabel}
          class={`group block h-full rounded-3xl bg-[color:var(--black-nav)]/50 backdrop-blur-md
                 p-5 md:p-6 shadow-[0_12px_30px_-12px_rgba(0,0,0,.6)]
                 transition-all duration-300 motion-safe:hover:-translate-y-1
                 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--${card.accentColor})]/40`}>
          <figure class='relative'>
            <!-- portrait-safe frame -->
            <div class='rounded-2xl bg-white/[.03] p-3 shadow-[inset_0_1px_0_rgba(255,255,255,.05)]'>
              <div class='aspect-[3/4] w-full overflow-hidden rounded-xl bg-white/[.02] flex items-center justify-center'>
                <div class='h-full w-full flex items-center justify-center' set:html={card.icon} />
              </div>
            </div>
            <!-- accent halo on hover (no border) -->
            <span
              class='pointer-events-none absolute inset-0 rounded-3xl opacity-0 transition-opacity duration-300
                            group-hover:opacity-100'
              style={`box-shadow: 0 0 0 1px color-mix(in oklab, var(--${card.accentColor}) 45%, transparent),
                                   0 20px 50px -20px color-mix(in oklab, var(--${card.accentColor}) 45%, transparent);`}></span>
          </figure>

          <div class='mt-5 text-center'>
            <p class={`text-xs tracking-wider uppercase text-[color:var(--${card.accentColor})]`}>
              {card.title}
            </p>
            <p
              class={`text-4xl font-bold tracking-tight mt-1 bg-gradient-to-r from-[color:var(--${card.accentColor})] to-[color:var(--${card.accentColor})]/70 bg-clip-text text-transparent`}>
              {card.count}
            </p>
            <span
              class={`mt-2 inline-flex items-center gap-1 text-sm text-[color:var(--${card.accentColor})] font-medium
                           rounded-full px-2.5 py-1 bg-[color:var(--${card.accentColor})]/[.08]
                           transition-colors duration-200 group-hover:bg-[color:var(--${card.accentColor})]/[.12]`}>
              {card.linkText}
            </span>
          </div>
        </a>
      </li>
    ))}
  </ul>
</section>