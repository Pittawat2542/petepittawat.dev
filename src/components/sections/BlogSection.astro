---
import Container from '../ui/core/Container';
import { BlogCard } from '../ui/cards/BlogCard';
import GlassButton from '../ui/navigation/GlassButton';
import { ArrowRight } from 'lucide-astro';
import type { BlogPost } from '../../types';

interface Props {
  posts: BlogPost[];
  allPosts?: BlogPost[];
}

const { posts, allPosts } = Astro.props as Props;
---

<!-- Latest from the Blog -->
<Container className="reveal glass-section mt-20">
  <div class="mb-8 flex flex-col items-start justify-between gap-6 sm:flex-row sm:items-end">
    <div class="space-y-2">
      <div
        class="flex items-center gap-2 text-xs font-semibold tracking-[0.35em] text-[color:var(--white)]/60 uppercase"
      >
        <span class="h-2 w-2 rounded-full bg-[color:var(--accent-blog)]"></span>
        Latest Writing
      </div>
      <h2 class="text-2xl font-bold tracking-tight md:text-3xl">
        Fresh experiments and field notes
      </h2>
      <p class="max-w-xl text-[color:var(--white)]/75">
        Short reads on evaluation, prompting techniques, and the practical side of running LLM
        systems in production.
      </p>
    </div>
    <GlassButton href="/blog" variant="ghost" size="md">
      Browse all articles
      <ArrowRight class="h-4 w-4" aria-hidden="true" />
    </GlassButton>
  </div>
  {
    posts.length === 0 ? (
      <div class="shape-squircle rounded-2xl border border-white/10 bg-white/5 px-6 py-10 text-center text-[color:var(--white)]/70">
        No posts yet â€” new writing is on the way.
      </div>
    ) : (
      <ul class="grid grid-cols-1 gap-5 md:grid-cols-2 md:gap-6 lg:gap-7" id="latest-blog">
        {posts.map(post => (
          <BlogCard post={post} allPosts={allPosts || undefined} />
        ))}
      </ul>
    )
  }
</Container>
