---
import { SITE_TITLE, SITE_DESCRIPTION } from '@/consts';
import { getCollection } from 'astro:content';
import BlogListPage from '@/components/layout/BlogListPage';
import PageWithHero from '@/layouts/PageWithHero.astro';
import type { BlogPost } from '@/types';

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
) as BlogPost[];
const tags = [
  'All',
  ...new Set(
    posts
      .flatMap(post => post.data.tags)
      .flat()
      .sort()
  ),
];
---

<PageWithHero
  title={`${SITE_TITLE} - Blog`}
  description={SITE_DESCRIPTION}
  hero={{
    title: 'Blog',
    subtitle: 'Explore my thoughts, tutorials, and insights on technology, programming, and AI.',
    page: 'blog',
  }}
>
  <Fragment slot="head"></Fragment>
  <BlogListPage client:idle posts={posts} tags={tags} />
</PageWithHero>

<!-- Removed column-span styling now that list uses CSS grid -->
